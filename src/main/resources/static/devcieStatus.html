<!DOCTYPE html> <html lang="zh-CN" class="no-js"> <head>	<meta charset="utf-8" />	<title>芜湖绿色能源有公司</title>    <link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>    <link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>    <link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-fileupload.css" />    <link rel="stylesheet" type="text/css" href="media/css/jquery.gritter.css" />    <link rel="stylesheet" type="text/css" href="media/css/chosen.css" />    <link rel="stylesheet" type="text/css" href="media/css/select2_metro.css" />    <link rel="stylesheet" type="text/css" href="media/css/jquery.tagsinput.css" />    <link rel="stylesheet" type="text/css" href="media/css/clockface.css" />    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-wysihtml5.css" />    <link rel="stylesheet" type="text/css" href="media/css/datepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/timepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/colorpicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-toggle-buttons.css" />    <link rel="stylesheet" type="text/css" href="media/css/daterangepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/datetimepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/multi-select-metro.css" />   <link rel="stylesheet" type="text/css" href="media/css/bootstrap-switch.min.css">    <link href="media/css/jqvmap.css" rel="stylesheet" type="text/css" media="screen"/>    <link rel="shortcut icon" href="media/image/favicon.ico" /></head><style>	a {		text-decoration: none;			}	a:hover{		cursor: pointer;	}    .table th, .table td {        text-align: center;        vertical-align: middle!important;    }    .btn-circle {        width: 15px;        height: 15px;        text-align: center;        padding: 6px 0;        font-size: 12px;        line-height: 1.428571429;        border-radius: 15px;    }</style><body class="page-header-fixed" ng-app="wuhugeli1"   ng-controller="baselinerdevice1" ng-init="connect()">	<!--    	作者：1105500250@qq.com    	时间：2019-02-24    	描述：顶部导航栏    -->	<div class="header navbar navbar-inverse navbar-fixed-top">        <div class="navbar-inner">            <div class="container-fluid">                <a class="brand" href="index.html">                   <span>格力公司</span>                </a>                <a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">                    <img src="media/image/menu-toggler.png" alt="" />                </a>                          <ul class="nav pull-right">                    <li class="dropdown" id="header_inbox_bar">                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">                                <i class="icon-envelope"></i>                                <span class="badge">5</span>                        </a>                        <ul class="dropdown-menu extended inbox">                            <li>                                <p>现在有6个新通知</p>                            </li>                            <li>								<a href="inbox.html?a=view">								<span class="photo"><img src="media/image/avatar2.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长</span>								<span class="time">Just Now</span>								</span>								<span class="message">								三号机出现问题								</span>  								</a>							</li>							<li>								<a href="inbox.html?a=view">								<span class="photo"><img src="./media/image/avatar3.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长1</span>								<span class="time">16 mins</span>								</span>								<span class="message">								设备损坏								</span>  								</a>							</li>							<li>								<a href="inbox.html?a=view">								<span class="photo"><img src="./media/image/avatar1.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长</span>								<span class="time">2 hrs</span>								</span>								<span class="message">								设备损坏								</span>  								</a>							</li>							<li class="external">								<a href="inbox.html">查看所有信息 <i class="m-icon-swapright"></i></a>							</li>						</ul>					</li>					<li class="dropdown user">						<a href="#" class="dropdown-toggle" data-toggle="dropdown">						<img alt="" src="media/image/avatar1_small.jpg" />						<span class="username">黄涛</span>						<i class="icon-angle-down"></i>						</a>						<ul class="dropdown-menu">                             <li><a href="login.html"><i class="icon-signout"></i>退出</a></li>                        </ul>					</li>									</ul>							</div>		</div>			</div>    <!--    	作者：1105500250@qq.com    	时间：2019-02-24    	描述：页面面板    -->      <div class="page-container">        <!--        	作者：1105500250@qq.com        	时间：2019-02-24        	描述：右侧面板        -->        <div class="page-sidebar nav-collapse collapse">            <ul class="page-sidebar-menu">            	<li>                    <div class="sidebar-toggler hidden-phone"></div>                </li>                <li>                    <form class="sidebar-search">                        <div class="input-box">							<a href="javascript:;" class="remove"></a>							<input type="text" placeholder="搜索..." />							<input type="button" class="submit" value=" " />                        </div>                    </form>                </li>                <li class="start active">                    <a href="javascript:;">                    <i class="icon-cogs"></i>                     <span class="title">生产线监控</span>                     <span class="arrow "></span>                    </a>                    <ul class="sub-menu">                        <li class="active">                           <a href="index.html">生产线监控</a>                        </li>                    </ul>				</li>				<li class="">					<a href="javascript:;">					<i class="icon-bookmark-empty"></i> 					<span class="title">备件管理</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li >							<a href="allgoods.html">							备件库存</a>						</li>						<li >							<a href="input.html">							备件入库</a>						</li>						<li >							<a href="output.html">							备件出库</a>						</li>					</ul>				</li>				<li class="">					<a href="javascript:;">					<i class="icon-user"></i> 					<span class="title">人事管理</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li >							<a href="form_layout.html">							所有员工</a>						</li>						<li >							<a href="form_samples.html">							权限设置</a>						</li>						<li >							<a href="form_component.html">							角色设置</a>						</li>						<li >							<a href="form_wizard.html">							其他</a>						</li>					</ul>				</li>				<li class="">					<a href="javascript:;">					<i class="icon-stethoscope"></i> 					<span class="title">设备养护检修</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li >							<a href="portlet_general.html">							故障信息汇总</a>						</li>						<li >							<a href="portlet_draggable.html">							设备点检</a>						</li>						<li >							<a href="portlet_draggable.html">							设备保养</a>						</li>					</ul>				</li>                <li class="">                    <a href="javascript:;">                        <i class=" icon-cog"></i>                        <span class="title">后台管理</span>                        <span class="arrow "></span>                    </a>                    <ul class="sub-menu">                        <li >                            <a href="baselist.html">                                查看基地列表</a>                        </li>                        <li >                            <a href="linerlist.html">                                查看生产线列表</a>                        </li>                        <li >                            <a href="devicelist.html">                                查看设备列表</a>                        </li>                        <li >                            <a href="creatliner.html">                                创建生产线</a>                        </li>                        <li >                            <a href="backdetect.html">                                查看所有生产线</a>                        </li>                    </ul>                </li>				<li class="last ">					<a href="#">					<i class="icon-bar-chart"></i> 					<span class="title">生产线能耗表</span>					</a>				</li>            </ul>        </div>	    <!--        	作者：1105500250@qq.com        	时间：2019-02-24        	描述：左侧面板        --> 		<div class="page-content">           			  <div class="container-fluid">				<div class="row-fluid">					<div class="span12">						<ul class="breadcrumb">							<li>								<i class="icon-home"></i>								<a href="index.html">设备监控</a> 								<i class="icon-angle-right"></i>							</li>							<li><a href="#">设备监控</a></li>						</ul>                    </div>				</div>								<div id="dashboard">                    					<div class="clearfix"></div>					<div class="row-fluid">						<div class="span12">							<div class="portlet solid bordered light-grey">								<div class="portlet-title">                                    <div class="caption"><i class="icon-cog"></i>生产线设备详细</div>								</div>								<div class="portlet-body">                                    <table class="table table-hover table-bordered">                                         <tr class="active">                                             <th>编号</th>                                             <th>设备</th>                                         </tr>                                        <tr class="success" ng-repeat="d in  data">                                            <td>{{$index+1}}</td>                                            <td><a ng-click="findDataById(d.did,d.deviceName)">{{d.deviceName}}</a></td>                                        </tr>                                    </table>								</div>							</div>						</div>                    </div>				</div>			</div>            </div>            <!--            	作者：1105500250@qq.com            	时间：2019-02-25            	描述：结束            -->		</div>			</div>	<!--页面底部-->	<div class="footer">		<div class="footer-inner">			2019 &copy; 芜湖绿色再生能源有限公司.		</div>		<div class="footer-tools">			<span class="go-top">			<i class="icon-angle-up"></i>			</span>		</div>	</div>    <script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>    <script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>    <script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>    <script src="media/js/bootstrap.min.js" type="text/javascript"></script>    <script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>    <script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>    <script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>    <script src="media/js/jquery.uniform.min.js" type="text/javascript" ></script>    <script type="text/javascript" src="media/js/ckeditor.js"></script>    <script type="text/javascript" src="media/js/bootstrap-fileupload.js"></script>    <script type="text/javascript" src="media/js/chosen.jquery.min.js"></script>    <script type="text/javascript" src="media/js/select2.min.js"></script>    <script type="text/javascript" src="media/js/wysihtml5-0.3.0.js"></script>    <script type="text/javascript" src="media/js/bootstrap-wysihtml5.js"></script>    <script type="text/javascript" src="media/js/jquery.tagsinput.min.js"></script>    <script type="text/javascript" src="media/js/jquery.toggle.buttons.js"></script>    <script type="text/javascript" src="media/js/bootstrap-datepicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-datetimepicker.js"></script>    <script type="text/javascript" src="media/js/clockface.js"></script>    <script type="text/javascript" src="media/js/date.js"></script>    <script type="text/javascript" src="media/js/daterangepicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-colorpicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-timepicker.js"></script>    <script type="text/javascript" src="media/js/jquery.inputmask.bundle.min.js"></script>    <script type="text/javascript" src="media/js/jquery.input-ip-address-control-1.0.min.js"></script>    <script type="text/javascript" src="media/js/jquery.multi-select.js"></script>    <script src="media/js/app.js"></script>    <script src="media/js/form-components.js"></script>    <script type="text/javascript" src="media/js/angular.min.js"></script>    <script src="media/js/angular-route.min.js"></script>    <script src="media/js/bootstrap-switch.min.js" type="text/javascript"></script>    <script src="common/sockjs.min.js"></script>    <script src="common/stomp.min.js"></script>    <script>		jQuery(document).ready(function() {            App.init();            FormComponents.init();        });        function getUrlParam(name) {            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象            var r = window.location.search.substr(1).match(reg);  //匹配目标参数            if (r != null)                return decodeURIComponent(r[2]);            else                return null; //返回参数值        }        var did = getUrlParam("id");//1        var pid = getUrlParam("pid");//电脑生产线        var app=angular.module('wuhugeli1',[]);        var baseInfo = [];        app.controller('baselinerdevice1',function($scope,$http) {            //值获取该设备的最后二条开关量记录  和设备名称 用.do做            $scope.connect = function() {                $scope.did1 = did;                $scope.pid1 = pid;                var socket = new SockJS('/my-websocket');                stompClient = Stomp.over(socket);                stompClient.connect({}, function(frame) {                    $scope.send();                    $scope.findT10SwitchByTime();                    stompClient.subscribe('/topic/send', function(msg) {                        $scope.$apply();                    });                    // 服务器传递来的数据 在 r 中                    stompClient.subscribe('/topic/callback', function(r) {                        var dd = JSON.parse(r.body);                        $scope.data = dd;//json字符串转换为json                        //console.log($scope.data[0].did);//15                        $scope.$apply();                    });                    $scope.$apply();                });                $scope.send = function() {                    //alert("链接了");                    stompClient.send("/app/send", {}, JSON.stringify({                        'did': $scope.did1,                        'pid':$scope.pid1                    }));                }            };            //当天的开关机记录  当 wifi为10的时候 执行下面的那个            $scope.findT10SwitchByTime = function() {                if($scope.id ==="10") {                    $http.get("/findT10SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            console.log("6666666666666");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="11") {                    $http.get("/findT11SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="15") {                    $http.get("/findT15SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="16") {                    $http.get("/findT16SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="17") {                    $http.get("/findT17SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="18") {                    $http.get("/findT18SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="19") {                    $http.get("/findT19SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="21") {                    $http.get("/findT21SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="22") {                    $http.get("/findT22SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="24") {                    $http.get("/findT24SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="26") {                    $http.get("/findT26SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="27") {                    $http.get("/findT27SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="28") {                    $http.get("/findT28SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="29") {                    $http.get("/findT29SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="30") {                    $http.get("/findT30SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="40") {                    $http.get("/findT40SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="41") {                    $http.get("/findT41SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="42") {                    $http.get("/findT42SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="43") {                    $http.get("/findT43SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }else if($scope.id ==="44") {                    $http.get("/findT44SwitchByTime.do").success(                        function (response) {                            //alert("执行了");                            $scope.listByTime = response;                        }                    );                }            }            $scope.findDataById = function(id,name){                console.log(name);                window.location.href = "deviceInfo.html?id="+id+"&name="+name;            }        });    </script><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body></html>