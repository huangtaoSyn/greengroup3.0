<!DOCTYPE html> <html lang="zh-CN" class="no-js"> <head>	<meta charset="utf-8" />	<title>芜湖绿色能源有公司</title>   	<meta content="width=device-width, initial-scale=1.0" name="viewport" />    <link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style.css" rel="stylesheet" type="text/css"/>    <link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>    <link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>    <link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>    <!-- END GLOBAL MANDATORY STYLES -->    <!-- BEGIN PAGE LEVEL STYLES -->    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-fileupload.css" />    <link rel="stylesheet" type="text/css" href="media/css/jquery.gritter.css" />    <link rel="stylesheet" type="text/css" href="media/css/chosen.css" />    <!--<link rel="stylesheet" type="text/css" href="media/css/select2_metro.css" />-->   <link rel="stylesheet" type="text/css" href="common/select2.css" />       <link rel="stylesheet" type="text/css" href="common/select2-bootstrap.css" />    <!--   <link rel="stylesheet" type="text/css" href="common/index.js" />   -->    <link rel="stylesheet" type="text/css" href="media/css/jquery.tagsinput.css" />    <link rel="stylesheet" type="text/css" href="media/css/clockface.css" />    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-wysihtml5.css" />    <link rel="stylesheet" type="text/css" href="media/css/datepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/timepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/colorpicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/bootstrap-toggle-buttons.css" />    <link rel="stylesheet" type="text/css" href="media/css/daterangepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/datetimepicker.css" />    <link rel="stylesheet" type="text/css" href="media/css/multi-select-metro.css" />    <link href="media/css/bootstrap-modal.css" rel="stylesheet" type="text/css"/>	    <link rel="shortcut icon" href="media/image/favicon.ico"/></head><style>	a {		text-decoration: none;			}	a:hover{		cursor: pointer;	}</style><body class="page-header-fixed"  ng-app="createLiner" ng-controller="createLinerController" ng-init="queryAllList()">	<!--    	作者：1105500250@qq.com    	时间：2019-02-24    	描述：顶部导航栏    -->	<div class="header navbar navbar-inverse navbar-fixed-top">        <div class="navbar-inner">            <div class="container-fluid">                <a class="brand" href="index.html">                   <span>格力公司</span>                </a>                <a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">                    <img src="media/image/menu-toggler.png" alt="" />                </a>                          <ul class="nav pull-right">                    <li class="dropdown" id="header_inbox_bar">                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">                                <i class="icon-envelope"></i>                                <span class="badge">5</span>                        </a>                        <ul class="dropdown-menu extended inbox">                            <li>                                <p>现在有6个新通知</p>                            </li>                            <li>								<a href="inbox.html?a=view">								<span class="photo"><img src="media/image/avatar2.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长</span>								<span class="time">Just Now</span>								</span>								<span class="message">								三号机出现问题								</span>  								</a>							</li>							<li>								<a href="inbox.html?a=view">								<span class="photo"><img src="./media/image/avatar3.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长1</span>								<span class="time">16 mins</span>								</span>								<span class="message">								损坏								</span>  								</a>							</li>							<li>								<a href="inbox.html?a=view">								<span class="photo"><img src="./media/image/avatar1.jpg" alt="" /></span>								<span class="subject">								<span class="from">部长</span>								<span class="time">2 hrs</span>								</span>								<span class="message">								损坏								</span>  								</a>							</li>							<li class="external">								<a href="inbox.html">查看所有信息 <i class="m-icon-swapright"></i></a>							</li>						</ul>					</li>					<li class="dropdown user">						<a href="#" class="dropdown-toggle" data-toggle="dropdown">						<img alt="" src="media/image/avatar1_small.jpg" />						<span class="username">黄涛</span>						<i class="icon-angle-down"></i>						</a>						<ul class="dropdown-menu">                             <li><a href="login.html"><i class="icon-signout"></i>退出</a></li>                        </ul>					</li>									</ul>							</div>		</div>			</div>    <!--    	作者：1105500250@qq.com    	时间：2019-02-24    	描述：页面面板    -->      <div class="page-container">        <!--        	作者：1105500250@qq.com        	时间：2019-02-24        	描述：右侧面板        -->        <div class="page-sidebar nav-collapse collapse">            <ul class="page-sidebar-menu">            	<li>                    <div class="sidebar-toggler hidden-phone"></div>                </li>                <li>                    <form class="sidebar-search">                        <div class="input-box">							<a href="javascript:;" class="remove"></a>							<input type="text" placeholder="搜索..." />							<input type="button" class="submit" value=" " />                        </div>                    </form>                </li>                <li class="">                    <a href="javascript:;">                    <i class="icon-cogs"></i>                     <span class="title">生产线监控</span>                     <span class="arrow "></span>                    </a>                    <ul class="sub-menu">                        <li class="active">                           <a href="index.html">生产线监控</a>                        </li>                    </ul>				</li>                 <!--                 	作者：1105500250@qq.com                 	时间：2019-03-06                 	描述：备件管理                 -->				<li class="">					<a href="javascript:;">					<i class="icon-bookmark-empty"></i> 					<span class="title">备件管理</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li >							<a href="备件库存.html">							备件库存</a>						</li>						<li >							<a href="备件入库.html">							备件入库</a>						</li>						<li >							<a href="备件出库.html">							备件出库</a>						</li>					</ul>				</li>				<!--                	作者：1105500250@qq.com                	时间：2019-03-06                	描述：设备养护检修                -->				<li class="">					<a href="javascript:;">					<i class="icon-stethoscope"></i> 					<span class="title">设备养护检修</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">						<li >							<a href="portlet_general.html">							故障信息汇总</a>						</li>						<li >							<a href="portlet_draggable.html">							设备点检</a>						</li>						<li >							<a href="portlet_draggable.html">							设备保养</a>						</li>					</ul>				</li>				<!--                	作者：1105500250@qq.com                	时间：2019-03-06                	描述：后台管理                -->               <li class="start active">					<a href="javascript:;">					<i class=" icon-cog"></i> 					<span class="title">后台管理</span>					<span class="arrow "></span>					</a>					<ul class="sub-menu">                        <li >							<a href="baselist.html">							查看基地列表</a>						</li>						<li >							<a href="linerlist.html">							查看生产线列表</a>						</li>						<li >							<a href="devicelist.html">							查看设备列表</a>						</li>						<li class="active">							<a href="creatliner.html">							创建生产线</a>						</li>                        <li >                            <a href="backdetect.html">                                查看所有生产线</a>                        </li>                    </ul>                </li>                <!--                	作者：1105500250@qq.com                	时间：2019-03-06                	描述：生产线运转能耗分析                -->				<li class="last ">					<a href="#">					<i class="icon-bar-chart"></i> 					<span class="title">生产线运转能耗分析</span>					</a>				</li>            </ul>        </div>	    <!--        	作者：1105500250@qq.com        	时间：2019-02-24        	描述：左侧面板        --> 		<div class="page-content">           			  <div class="container-fluid">				<div class="row-fluid">					<div class="span12">						<ul class="breadcrumb">							<li>								<i class="icon-home"></i>								<a href="index.html">后台管理</a> 								<i class="icon-angle-right"></i>							</li>							<li><a href="#">添加生产线</a></li>						</ul>                    </div>				</div>								<div id="dashboard">                    					<div class="clearfix"></div>					<div class="row-fluid">						<div class="span12">                         <div class="portlet box red">							<div class="portlet-title">								<div class="caption"><i class="icon-cogs"></i>添加生产线</div>							</div>							<div class="portlet-body form">                                 <form  class="form-horizontal">                                    <div class="control-group">                                        <label class="control-label">选择基地</label>                                            <div class="controls">                                                <select class="medium m-wrap" ng-model="base" ng-change="basechange()" ng-options="base.bname for base in baselist">												</select>                                            </div>                                    </div>                                    <div class="control-group">                                        <label class="control-label">选择生产线</label>                                            <div class="controls">                                                <select class="medium m-wrap" tabindex="1" ng-model="line" ng-change="linechange()"  ng-options="line.pname for line in linelist">												</select>                                            </div>                                    </div>                                    <div class="control-group">                                        <label class="control-label">选择设备</label>                                            <div class="controls">                                               <!-- <select data-placeholder="请选择设备" class="chosen span6" multiple="multiple" tabindex="8" ng-options="device.deviceName for device in devicelist">                                                </select>-->                                                <select2 class="form-control span6" ng-change="devicechange()" ng-model="device" s2-options="device.did as device.deviceName for device in devicelist" multiple="multiple"></select2>                                            </div>                                    </div>                                    									<div class="form-actions">										<button type="submit" class="btn blue" ng-click="save()">确定</button>										<!--<button type="button" class="btn" ng-click="del()">取消</button>-->									</div>								</form>							</div>						</div>                    </div>				</div>			</div>            </div>            <!--            	作者：1105500250@qq.com            	时间：2019-02-25            	描述：结束            -->		</div>			</div>	<!--页面底部-->	<div class="footer">		<div class="footer-inner">			2019 &copy; 芜湖绿色再生能源有限公司.		</div>		<div class="footer-tools">			<span class="go-top">			<i class="icon-angle-up"></i>			</span>		</div>	</div>    <script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>    <script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>    <!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->    <script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>    <script src="media/js/bootstrap.min.js" type="text/javascript"></script>    <script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>    <script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>    <script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>    <script src="media/js/jquery.uniform.min.js" type="text/javascript" ></script>    <script type="text/javascript" src="media/js/ckeditor.js"></script>    <script type="text/javascript" src="media/js/bootstrap-fileupload.js"></script>    <script type="text/javascript" src="media/js/chosen.jquery.min.js"></script>    <script type="text/javascript" src="common/select2.min.js"></script>    <script type="text/javascript" src="media/js/wysihtml5-0.3.0.js"></script>    <script type="text/javascript" src="media/js/bootstrap-wysihtml5.js"></script>    <script type="text/javascript" src="media/js/jquery.tagsinput.min.js"></script>    <script type="text/javascript" src="media/js/jquery.toggle.buttons.js"></script>    <script type="text/javascript" src="media/js/bootstrap-datepicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-datetimepicker.js"></script>    <script type="text/javascript" src="media/js/clockface.js"></script>    <script type="text/javascript" src="media/js/date.js"></script>    <script type="text/javascript" src="media/js/daterangepicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-colorpicker.js"></script>    <script type="text/javascript" src="media/js/bootstrap-timepicker.js"></script>    <script type="text/javascript" src="media/js/jquery.inputmask.bundle.min.js"></script>    <script type="text/javascript" src="media/js/jquery.input-ip-address-control-1.0.min.js"></script>    <script type="text/javascript" src="media/js/jquery.multi-select.js"></script>    <script src="media/js/bootstrap-modal.js" type="text/javascript" ></script>    <script src="media/js/bootstrap-modalmanager.js" type="text/javascript" ></script>    <script src="media/js/app.js"></script>    <script src="media/js/form-components.js"></script>    <script type="text/javascript" src="media/js/angular.min.js"></script>    <script type="text/javascript" src="common/angular-select2.min.js"></script>    <script>		jQuery(document).ready(function() {                App.init();            Index.init();            FormComponents.init();		});        var app = angular.module("createLiner",['rt.select2']);        app.controller("createLinerController",function ($scope,$http) {            //查询所有基地列表  生产线列表  设备列表            $scope.queryAllList = function () {                $http.post("../addAll.do").success(                    function(response){                        $scope.baselist =  response;                        console.log($scope.baselist);                    }                );                $http.post("../findAllProductLine.do").success(                    function(response){                        $scope.linelist =  response;                        console.log($scope.linelist);                    }                );                $http.post("../findAllDevice.do").success(                    function(response){                        $scope.devicelist =  response;                        console.log($scope.devicelist);                    }                );            }            var baseLineDevice = [];            //查询基地列表            $scope.basechange =function () {                //存入 栈中                baseLineDevice.push($scope.base);            }            //查询生产线列表            $scope.linechange = function () {                baseLineDevice.push($scope.line);            }            //查询设备列表  每次事件变化请求一次  单独封装在一个类中 当发送 1 2 3 id时候，            $scope.devicechange = function () {                console.log($scope.device);                $http.get("../findDeviceByIds.do?ids="+$scope.device).success(                    function(response){                        baseLineDevice.push(response);                    }                );            }            //保存生产线  工厂实际情况为   所以一个设备供电模块为一个。不是每个设备单独供电            $scope.save = function () {                var newBaseLineDevice = [];                newBaseLineDevice = baseLineDevice.splice(0,2);                newBaseLineDevice.push(baseLineDevice.splice(-1)[0]);                console.log(newBaseLineDevice);                var  baseid = newBaseLineDevice[0].id;//基地id                //alert(baseid);                newBaseLineDevice[1].baseId = baseid;                var productLineId = newBaseLineDevice[1].productLineId;//生产线id                console.log(newBaseLineDevice[2][0]);                for(var i = 0 ; i<newBaseLineDevice[2].length ; i++ ){                    newBaseLineDevice[2][i].productlineid = productLineId;                    //将baseid存放到rdid                    newBaseLineDevice[2][i].rdid = baseid;                    //alert(newBaseLineDevice[2][i].rdid);                }                //将每个表单独存储                $http.post("../addResultBase.do",newBaseLineDevice[0]).success(                    function(response){                    }                );                $http.post("../addResultProductLiner.do",newBaseLineDevice[1]).success(                    function(response){                    }                );                for(var i = 0 ;i<newBaseLineDevice[2].length;i++){                    $http.post("../addResultDevice.do",newBaseLineDevice[2][i]).success(                        function(response){                        }                    );                }                window.location.href="backdetect.html";            }        });	</script><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body></html>